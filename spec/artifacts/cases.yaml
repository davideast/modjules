- id: ARTIFACT-01
  description: parsed() returns empty result when unidiffPatch is undefined
  category: artifacts
  status: implemented
  priority: P0
  when: ChangeSetArtifact.parsed
  given:
    gitPatch:
      baseCommitId: "abc123"
      suggestedCommitMessage: "test"
  then:
    result:
      files: []
      summary:
        totalFiles: 0
        created: 0
        modified: 0
        deleted: 0

- id: ARTIFACT-02
  description: parsed() returns empty result when unidiffPatch is empty string
  category: artifacts
  status: implemented
  priority: P0
  when: ChangeSetArtifact.parsed
  given:
    gitPatch:
      unidiffPatch: ""
      baseCommitId: "abc123"
      suggestedCommitMessage: "test"
  then:
    result:
      files: []
      summary:
        totalFiles: 0
        created: 0
        modified: 0
        deleted: 0

- id: ARTIFACT-03
  description: parsed() correctly parses valid unidiff with created file
  category: artifacts
  status: implemented
  priority: P0
  when: ChangeSetArtifact.parsed
  given:
    gitPatch:
      unidiffPatch: |
        diff --git a/newfile.ts b/newfile.ts
        --- /dev/null
        +++ b/newfile.ts
        @@ -0,0 +1,3 @@
        +line 1
        +line 2
        +line 3
      baseCommitId: "abc123"
      suggestedCommitMessage: "add newfile"
  then:
    result:
      files:
        - path: "newfile.ts"
          changeType: "created"
          additions: 3
          deletions: 0
      summary:
        totalFiles: 1
        created: 1
        modified: 0
        deleted: 0
